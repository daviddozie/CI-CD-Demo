name : Build, Test and Deploy

on:
  push:
    branches:
      - main

jobs:
  build:
      runs-on: ubuntu-latest

      strategy:
        matrix:
          node-version: [10.x, 12.x, 14.x]

      steps:
        - uses:  actions/checkout@v2
        
        - name: Setup Node
          uses: actions/setup-node@v1
          with:
            node-version: ${{ matrix.node-version }}
            
        - name: Install dependencies
          run: npm install

  test:
      needs: build
      runs-on: ubuntu-latest 
      
      steps:
        - uses:  actions/checkout@v2
        
        - name: Setup Node
          uses: actions/setup-node@v1
          with:
            node-version: ${{ matrix.node-version }}
            
        - name: Install dependencies
          run: npm install 

        - name: Run the tests
          run: npm test

  deploy:
      needs: test
      runs-on: ubutu-lastest

      steps:
        - uses: actions/setup-node@v1

        - name: Deploy
          run: echo "We Are Live!!"   
